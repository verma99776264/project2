<!DOCTYPE html>
<html>
<head>
    <title>Send Location</title>
</head>
<body>
    <h1>Sending Location...</h1>
    <script>
        // Replace '192.168.80.67' with your actual laptop IP address
        const serverUrl = 'https://project2-3dlj.onrender.com/update-location';

        function sendLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(function(position) {
                    var lat = position.coords.latitude;
                    var lng = position.coords.longitude;

                    // Prompt for the name
                    var name = prompt("Please enter your name:");

                    // Check if the name is not empty
                    if (name !== null && name !== "") {
                        fetch(serverUrl, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ name: name, latestLocation: { latitude: lat, longitude: lng } })
                        }).then(response => {
                            if (response.ok) {
                                console.log('Location sent successfully');
                            } else {
                                console.error('Failed to send location');
                            }
                        }).catch(error => {
                            console.error('Error sending location:', error);
                        });
                    } else {
                        console.error('Name cannot be empty');
                    }
                }, function(error) {
                    console.error('Error getting location:', error);
                }, {
                    enableHighAccuracy: true,
                    maximumAge: 0,
                    timeout: 5000
                });
            } else {
                alert('Geolocation is not supported by this browser.');
            }
        }

        sendLocation();
    </script>
</body>
</html>